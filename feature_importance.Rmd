---
title: "Feature Importance of Brain Strain Signals"
output:
  html_document:
    df_print: paged
  pdf_document: default
---

This file is trying to look at the feature importance of brain strain signals from linear models. The workflow looks roughly like the following.

1. Build a linear model over the dataset by:
  - Feature selection using VIF until there is no severe collinearity effect
  - Use no other feature selection method, taking all the variables into the model
  - First use least squared fit, then consider huber fit
2. Find feature importance of the model by:
  - Using `first`, `last` and `standard coefficients` methods in `relaimpo` package
  - Test the robustness of this ranking by:
    - Compare results in different dataset;
    - Acquired by different methods
    
```{r}
# Packages
library(RcppCNPy)
library(car)
```

    
```{r}
# load data set
print(getwd())
x_hm <- npyLoad("data/X/HM_X_ang_vel.npy")
y_hm_mps <- npyLoad("data/Y/HM_MPS95.npy")
print(dim(x_hm))
print(dim(y_hm_mps))
```

```{r}
# calculate VIF
x_hm_s <- scale(x_hm)
model1 <- lm(y_hm_mps ~ x_hm_s)
model1
```
There are some `NA`s in the coefficients, they made the following steps to throw errors. So let's first get rid of those variables. (37, 38, 40, 41)


```{r}
x_hm_s2 <- as.data.frame(x_hm_s[,-c(37,38,40,41)])
print(dim(x_hm_s2))
model2 <- lm(y_hm_mps ~ ., data = cbind(y_hm_mps, x_hm_s2))
model2
car::vif(model2)
```

  